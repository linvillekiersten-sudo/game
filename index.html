import os, zipfile

html = """<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Five Nights at Samford (Pixel Demo)</title>
  <style>
    :root { color-scheme: dark; }
    html, body { height: 100%; margin: 0; background:#0b0b0f; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .wrap { display:flex; flex-direction:column; align-items:center; gap:10px; padding:12px; }
    canvas { image-rendering: pixelated; image-rendering: crisp-edges; background:#000; border:1px solid #222; border-radius:12px; }
    .row { width:min(900px, 96vw); display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .panel { background:#11121a; border:1px solid #1f2233; border-radius:12px; padding:10px 12px; flex:1; min-width:280px; }
    .btns { display:flex; gap:8px; flex-wrap:wrap; }
    button { background:#1b1f33; color:#e8e8ff; border:1px solid #2a3050; padding:10px 12px; border-radius:10px; cursor:pointer; }
    button:hover { filter:brightness(1.1); }
    button:active { transform: translateY(1px); }
    kbd { background:#1b1f33; border:1px solid #2a3050; padding:2px 6px; border-radius:6px; }
    .small { opacity:.8; font-size:13px; line-height:1.35; }
    .danger { color:#ff7a7a; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="row">
      <div class="panel">
        <div><strong>Five Nights at Samford</strong> <span class="small">— playable pixel demo (single-file)</span></div>
        <div class="small">
          Survive from <strong>12:00 AM</strong> to <strong>6:00 AM</strong>. Watch cameras, manage power, and keep the door closed when a “teacher” reaches you.
          <br/>
          Controls: <kbd>C</kbd> cameras • <kbd>←</kbd>/<kbd>→</kbd> change cam • <kbd>D</kbd> door • <kbd>R</kbd> reset.
        </div>
      </div>
      <div class="panel">
        <div class="btns">
          <button id="btnCam">Toggle Cameras (C)</button>
          <button id="btnPrev">Prev Cam (←)</button>
          <button id="btnNext">Next Cam (→)</button>
          <button id="btnDoor">Toggle Door (D)</button>
          <button id="btnReset">Reset (R)</button>
        </div>
        <div class="small" style="margin-top:8px">
          Tip: Leaving cameras up drains power faster. Closing the door drains power a lot.
          If power hits 0, the lights go out… and it’s basically over.
        </div>
      </div>
    </div>

    <canvas id="game" width="360" height="240" aria-label="game canvas"></canvas>

    <div class="row">
      <div class="panel small">
        <div><strong>What’s in this demo</strong></div>
        <ul>
          <li>Low-res pixel rendering + CRT-ish camera noise</li>
          <li>3 “teacher” stalkers with simple AI routes across Samford-ish rooms</li>
          <li>Door + camera system + power management</li>
          <li>Night 1 difficulty (you can tweak values in the code)</li>
        </ul>
        <div class="danger small">
          Note: This is a parody fan-style project. If you publish it, avoid using real people’s names/likenesses without permission.
        </div>
      </div>
      <div class="panel small">
        <div><strong>Next upgrades (if you want)</strong></div>
        <ul>
          <li>More rooms (library, dorm hall, chapel corridor) + map overlay</li>
          <li>Custom pixel sprites for Andrew + each teacher</li>
          <li>Audio cues, phone call intro, “finals week” nights 2–5</li>
          <li>Vent/left-door/right-door mechanics</li>
        </ul>
      </div>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  function text(str, x, y, size=10, align='left') {
    ctx.font = `${size}px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace`;
    ctx.textAlign = align;
    ctx.fillText(str, x, y);
  }
  function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

  const CAMS = [
    { name: "Office Hall", room: "HALL", vibe: "harsh fluorescents" },
    { name: "Davis Library", room: "LIB", vibe: "whispering stacks" },
    { name: "Chapel Corridor", room: "CHAP", vibe: "quiet footsteps" },
    { name: "Classroom 1", room: "CLASS", vibe: "chalk dust" },
    { name: "Brock Lobby", room: "BROCK", vibe: "echoes" },
  ];

  const ROUTES = {
    HALL:   ["OFFICE"],
    LIB:    ["CHAP", "CLASS"],
    CHAP:   ["HALL"],
    CLASS:  ["BROCK"],
    BROCK:  ["HALL"],
    OFFICE: ["OFFICE"],
  };

  const TEACHERS = [
    { id:"core",  name:"Professor Core Texts", speed: 1.00, aggro: 0.010, room:"LIB",  color:"#e8e8ff" },
    { id:"att",   name:"Dr. Attendance",       speed: 1.15, aggro: 0.012, room:"CLASS",color:"#c6ffdd" },
    { id:"group", name:"Professor Group Proj", speed: 0.95, aggro: 0.009, room:"BROCK",color:"#ffd6a5" },
  ];

  const state = {
    running: true,
    gameOver: false,
    win: false,
    nightSeconds: 0,
    secondsToWin: 360, // 6 in-game hours at 1 sec = 1 min
    camerasUp: false,
    camIndex: 0,
    doorClosed: false,
    power: 100,
    drainBase: 0.06,
    drainCams: 0.12,
    drainDoor: 0.18,
    jumpscareTimer: 0,
    msg: "Night 1 — Keep calm.",
    msgTimer: 4,
    teachers: TEACHERS.map(t => ({...t, moveCooldown:0, seenRecently:false, patience:0, atDoor:false}))
  };

  function reset(){
    state.running = true;
    state.gameOver = false;
    state.win = false;
    state.nightSeconds = 0;
    state.camerasUp = false;
    state.camIndex = 0;
    state.doorClosed = false;
    state.power = 100;
    state.jumpscareTimer = 0;
    state.msg = "Night 1 — Keep calm.";
    state.msgTimer = 4;
    state.teachers = TEACHERS.map(t => ({...t, moveCooldown:0, seenRecently:false, patience:0, atDoor:false}));
  }

  function toggleCams(){
    if (state.gameOver || state.win) return;
    state.camerasUp = !state.camerasUp;
    state.msg = state.camerasUp ? "Cameras up." : "Cameras down.";
    state.msgTimer = 1.5;
  }
  function toggleDoor(){
    if (state.gameOver || state.win) return;
    state.doorClosed = !state.doorClosed;
    state.msg = state.doorClosed ? "Door CLOSED." : "Door OPEN.";
    state.msgTimer = 1.5;
  }
  function prevCam(){
    if (!state.camerasUp || state.gameOver || state.win) return;
    state.camIndex = (state.camIndex - 1 + CAMS.length) % CAMS.length;
  }
  function nextCam(){
    if (!state.camerasUp || state.gameOver || state.win) return;
    state.camIndex = (state.camIndex + 1) % CAMS.length;
  }

  document.addEventListener('keydown', (e) => {
    const k = e.key.toLowerCase();
    if (k === 'c') toggleCams();
    if (k === 'd') toggleDoor();
    if (k === 'r') reset();
    if (e.key === 'ArrowLeft') prevCam();
    if (e.key === 'ArrowRight') nextCam();
  });

  document.getElementById('btnCam').onclick = toggleCams;
  document.getElementById('btnDoor').onclick = toggleDoor;
  document.getElementById('btnPrev').onclick = prevCam;
  document.getElementById('btnNext').onclick = nextCam;
  document.getElementById('btnReset').onclick = reset;

  function roomContainsTeacher(roomCode){
    return state.teachers.filter(t => t.room === roomCode);
  }
  function camRoomCode(){ return CAMS[state.camIndex].room; }

  function moveTeacher(t){
    if (t.room === "OFFICE") {
      t.atDoor = true;
      if (state.doorClosed) {
        t.patience += 1;
        if (t.patience > 4) {
          t.room = "HALL";
          t.atDoor = false;
          t.patience = 0;
          state.msg = `${t.name} left... for now.`;
          state.msgTimer = 2.0;
        }
      } else {
        state.gameOver = true;
        state.running = false;
        state.jumpscareTimer = 2.2;
      }
      return;
    }
    const options = ROUTES[t.room] || ["HALL"];
    const progress = state.nightSeconds / state.secondsToWin;
    let choice = options[(Math.random()*options.length)|0];
    if (Math.random() < (0.20 + 0.40*progress)) {
      if (options.includes("HALL")) choice = "HALL";
      if (t.room === "HALL") choice = "OFFICE";
    }
    t.room = choice;
    t.atDoor = (t.room === "OFFICE");
  }

  function drawPixelRoomBackground(mode){
    ctx.fillStyle = "#05060a"; ctx.fillRect(0,0,W,H);
    ctx.fillStyle = "rgba(0,0,0,.45)"; ctx.fillRect(0,0,W,H);
    ctx.fillStyle = "#0c0f1a"; ctx.fillRect(0, H*0.62, W, H*0.38);
    ctx.fillStyle = "#070a12"; ctx.fillRect(0, 0, W, H*0.62);

    if (mode === "OFFICE") {
      ctx.fillStyle = "#0f1324"; ctx.fillRect(22, 145, 130, 50);
      ctx.fillStyle = "#121a35"; ctx.fillRect(170, 150, 165, 45);

      ctx.fillStyle = "#0a0c14"; ctx.fillRect(W-86, 72, 62, 140);

      if (state.doorClosed) {
        ctx.fillStyle = "#23284a"; ctx.fillRect(W-86, 72, 62, 140);
        ctx.fillStyle = "#2f3866"; ctx.fillRect(W-82, 78, 54, 128);
      } else {
        ctx.fillStyle = "#000"; ctx.fillRect(W-86, 72, 62, 140);
      }

      if (state.power > 0) {
        ctx.fillStyle = "rgba(255,255,255,0.05)";
        ctx.fillRect(0,0,W,H);
      }
    }
  }

  function drawStatic(){
    const n = 220;
    ctx.globalAlpha = 0.10;
    for (let i=0;i<n;i++){
      const x = (Math.random()*W)|0;
      const y = (Math.random()*H)|0;
      const s = 1 + ((Math.random()*2)|0);
      ctx.fillStyle = Math.random() < 0.5 ? "#ffffff" : "#000000";
      ctx.fillRect(x,y,s,s);
    }
    ctx.globalAlpha = 1;
  }

  function drawTeacherSprite(x,y, color){
    ctx.fillStyle = color;
    ctx.fillRect(x-6, y-20, 12, 12);
    ctx.fillStyle = "#000";
    ctx.fillRect(x-3, y-17, 2, 2);
    ctx.fillRect(x+1, y-17, 2, 2);
    ctx.fillRect(x-2, y-13, 4, 1);

    ctx.fillStyle = color;
    ctx.fillRect(x-3, y-8, 6, 16);
    ctx.fillRect(x-10, y-6, 7, 2);
    ctx.fillRect(x+3, y-6, 7, 2);
    ctx.fillRect(x-5, y+8, 2, 8);
    ctx.fillRect(x+3, y+8, 2, 8);
  }

  function drawHUD(){
    ctx.fillStyle = "rgba(10,12,18,.85)";
    ctx.fillRect(0,0,W,26);
    ctx.fillStyle = "#e8e8ff";

    const minutes = Math.floor(state.nightSeconds);
    const hour = Math.floor(minutes / 60);
    const minute = minutes % 60;
    const displayHour = (12 + hour) % 12 || 12;
    const timeStr = `${displayHour}:${String(minute).padStart(2,'0')} AM`;
    text(timeStr, 10, 18, 12, 'left');

    const p = Math.round(state.power);
    text(`Power: ${p}%`, W-10, 18, 12, 'right');

    ctx.fillStyle = "rgba(10,12,18,.85)";
    ctx.fillRect(0,H-28,W,28);
    ctx.fillStyle = "#e8e8ff";
    const mode = state.camerasUp ? `CAM ${state.camIndex+1}/${CAMS.length}: ${CAMS[state.camIndex].name}` : "OFFICE";
    text(mode, 10, H-10, 12, 'left');

    const doorStr = state.doorClosed ? "Door: CLOSED" : "Door: OPEN";
    text(doorStr, W-10, H-10, 12, 'right');

    if (state.msgTimer > 0) {
      ctx.fillStyle = "rgba(0,0,0,.55)";
      ctx.fillRect(0, 26, W, 18);
      ctx.fillStyle = "#ffffff";
      text(state.msg, W/2, 39, 11, 'center');
    }
  }

  function drawOffice(){
    drawPixelRoomBackground("OFFICE");

    const hallTeachers = state.teachers.filter(t => t.room === "HALL");
    if (!state.camerasUp && hallTeachers.length && state.power > 0) {
      if (Math.random() < 0.35) {
        const t = hallTeachers[(Math.random()*hallTeachers.length)|0];
        ctx.globalAlpha = 0.65;
        drawTeacherSprite(W-56, 122, t.color);
        ctx.globalAlpha = 1;
      }
    }

    const atDoor = state.teachers.filter(t => t.room === "OFFICE");
    if (atDoor.length && state.power > 0) {
      const t = atDoor[0];
      if (state.doorClosed) {
        ctx.globalAlpha = 0.30;
        drawTeacherSprite(W-56, 122, t.color);
        ctx.globalAlpha = 1;
      } else {
        drawTeacherSprite(W-56, 122, t.color);
      }
    }

    if (state.power <= 0) {
      ctx.fillStyle = "#000"; ctx.fillRect(0,0,W,H);
      ctx.fillStyle = "#fff"; text("POWER OUT...", W/2, H/2, 16, 'center');
    }
  }

  function drawCameraView(){
    drawPixelRoomBackground("CAM");
    ctx.fillStyle = "rgba(40,80,60,.10)";
    ctx.fillRect(0,0,W,H);

    ctx.strokeStyle = "rgba(255,255,255,.18)";
    ctx.strokeRect(8, 34, W-16, H-70);

    ctx.fillStyle = "rgba(255,255,255,.9)";
    text(CAMS[state.camIndex].name, 14, 48, 12, 'left');
    ctx.fillStyle = "rgba(255,255,255,.6)";
    text(CAMS[state.camIndex].vibe, 14, 62, 10, 'left');

    const here = roomContainsTeacher(camRoomCode());
    let x = 90;
    for (const t of here) {
      drawTeacherSprite(x, 150, t.color);
      x += 90;
    }

    ctx.globalAlpha = 0.12;
    ctx.fillStyle = "#000";
    for (let y=34;y<H-36;y+=3) ctx.fillRect(8,y,W-16,1);
    ctx.globalAlpha = 1;

    drawStatic();

    if (state.power <= 0) {
      ctx.fillStyle = "#000"; ctx.fillRect(0,0,W,H);
      ctx.fillStyle = "#fff"; text("NO SIGNAL", W/2, H/2, 18, 'center');
    }
  }

  function drawJumpscare(){
    ctx.fillStyle = "#000"; ctx.fillRect(0,0,W,H);
    const t = state.teachers.find(x => x.room === "OFFICE") || state.teachers[0];
    ctx.fillStyle = t.color; ctx.fillRect(80, 40, 200, 170);
    ctx.fillStyle = "#000";
    ctx.fillRect(120, 85, 35, 30);
    ctx.fillRect(205, 85, 35, 30);
    ctx.fillRect(150, 145, 60, 10);
    ctx.fillStyle = "#fff";
    text("DETENTION.", W/2, 30, 18, 'center');
    ctx.fillStyle = "rgba(255,255,255,.9)";
    text("Press R to retry", W/2, H-18, 12, 'center');
  }

  function drawWin(){
    ctx.fillStyle = "#08160c"; ctx.fillRect(0,0,W,H);
    ctx.fillStyle = "#d6ffe8";
    text("6:00 AM", W/2, H/2-10, 22, 'center');
    ctx.fillStyle = "rgba(214,255,232,.85)";
    text("You survived Night 1.", W/2, H/2+18, 12, 'center');
    ctx.fillStyle = "rgba(214,255,232,.7)";
    text("Press R to play again", W/2, H-18, 12, 'center');
  }

  let last = performance.now();
  function tick(now){
    const dt = (now - last) / 1000;
    last = now;

    if (state.running && !state.gameOver && !state.win) {
      state.nightSeconds += dt;
      if (state.nightSeconds >= state.secondsToWin) {
        state.win = true; state.running = false;
      }

      state.msgTimer = Math.max(0, state.msgTimer - dt);

      let drain = state.drainBase;
      if (state.camerasUp) drain += state.drainCams;
      if (state.doorClosed) drain += state.drainDoor;
      state.power = clamp(state.power - drain * dt * 10, 0, 100);

      const progress = state.nightSeconds / state.secondsToWin;
      for (const t of state.teachers) {
        t.seenRecently = state.camerasUp && (t.room === camRoomCode());
        const shy = t.seenRecently ? 0.55 : 1.0;

        t.moveCooldown = Math.max(0, t.moveCooldown - dt);
        const chance = (t.aggro + 0.012*progress) * shy;

        if (t.moveCooldown === 0 && Math.random() < chance) {
          moveTeacher(t);
          const baseCd = (2.5 / t.speed) * (1.05 - 0.35*progress);
          t.moveCooldown = clamp(baseCd, 0.75, 2.8);

          if (t.room === "HALL") { state.msg = "Footsteps in the hall..."; state.msgTimer = 1.2; }
          if (t.room === "OFFICE") { state.msg = "Someone is at the door."; state.msgTimer = 1.4; }
        }

        if (state.power <= 0 && t.room === "HALL" && Math.random() < 0.05) {
          t.room = "OFFICE";
        }
        if (t.room === "OFFICE") moveTeacher(t);
      }

      if (state.power <= 0 && !state.doorClosed) {
        if (Math.random() < 0.015) {
          state.gameOver = true; state.running = false; state.jumpscareTimer = 2.2;
        }
      }
    }

    if (state.gameOver) {
      state.jumpscareTimer -= dt;
      if (state.jumpscareTimer < 0) state.jumpscareTimer = 0;
    }

    ctx.clearRect(0,0,W,H);

    if (state.win) drawWin();
    else if (state.gameOver) drawJumpscare();
    else {
      if (state.camerasUp) drawCameraView();
      else drawOffice();
      drawHUD();
    }

    requestAnimationFrame(tick);
  }

  reset();
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
"""

out_dir = "/mnt/data/five-nights-at-samford"
os.makedirs(out_dir, exist_ok=True)
index_path = os.path.join(out_dir, "index.html")
with open(index_path, "w", encoding="utf-8") as f:
    f.write(html)

zip_path = "/mnt/data/five-nights-at-samford.zip"
with zipfile.ZipFile(zip_path, "w", zipfile.ZIP_DEFLATED) as z:
    z.write(index_path, arcname="index.html")

(index_path, zip_path, os.path.getsize(zip_path))

